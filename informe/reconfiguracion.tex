\section{Reconfiguración de rutas}

\subsection{Descripción del problema}
Este problema plantea otra provincia de Optilandia, cuyas ciudades están conectadas por rutas pero con ciertos problemas: algunas ciudades no están conectadas y otras poseen varias maneras para viajar entre ellas. Para solucionarlo, el gobierno hará obras en las rutas de modo que haya una y sólo una forma de llegar desde cualquier ciudad a otra, construyendo nuevas rutas o destruyendo rutas existentes. 
\\
\par
Nos piden un algoritmo que, dadas las rutas y los costos de construcción y destrucción, nos diga que rutas hay que destruir y construir para satisfacer el problema de forma que gastemos lo menor posible. Como requisito, la complejidad de este algoritmo no puede ser peor que \textbf{O($n^2log(n)$)}, donde n es la cantidad de ciudades de la provincia.
\\
\par
\textbf{Agregar ejemplos}
\\
\par
\subsection{Desarrollo}
Como es usual, podemos representar a las ciudades como nodos de un grafo y a las rutas como los ejes, como no se especifica si las rutas son de una o dos manos vamos a asumir que las rutas son bidireccionales. Pero en este caso tenemos rutas existentes que se pueden destruir y rutas que se pueden crear, vamos a dividir estos ejes en dos conjuntos $C$ y $D$, el primero va a tener los ejes con los costos de construcción de rutas y el segundo va a tener los costos de destrucción, los costos de las rutas se representan como el peso del eje que representa esa ruta. Notemos que $C \cup D$ contiene las aristas de un grafo completo.
\\
\par
Una vez encontrada la solución, vamos a tener rutas que quedaron intactas y rutas que se construyeron, entonces vamos a llamar $RC$ un subconjunto de aristas de $C$ que contiene las rutas que deben construirse para lograr la solución óptima y $RD$ un subconjunto de $D$ que contiene las rutas que hay que mantener, podemos notar que $D - RD$ es el conjunto de rutas que hay que destruir, y que $RD \cup RC$ nos da como resultado la representación de la provincia una vez terminado el plan, llamaremos solución al conjunto de ejes $R$. 
\\
\par
El objetivo del algoritmo es que todas las ciudades se conecten solo de una manera, lo que en grafos sería que existe exactamente un camino simple entre todo par de
nodos y cómo sabemos, si pasa esto, el grafo es un árbol. Entonces el queremos llegar a que $R$ sea el conjunto de aristas de un árbol generador del grafo de entrada. 
\\
\par
Lo primero que podemos notar, es que, si $RD$ no es un bosque, tiene ciclos. Si tiene ciclos, no hay manera de que agregando aristas se obtenga un árbol. Como ya dijimos que $R$ tiene que ser un árbol, $RD$ tiene que ser un bosque.
\\
\par
Como $R$ tiene que ser árbol, y $RD$ bosque, $RC$ tiene que tener ejes que unen las componentes conexas de $RD$, sin formar ciclos.  Además queremos que el costo de la suma de las aristas que se agreguen sea mínimo. El algoritmo de Kruskal nos va a resolver esto, ya que en la invariante mantiene un bosque y agrega golosamente aristas que conectan componentes hasta llegar a un árbol. Nos vamos a aprovechar de esto y vamos aplicar Kruskal partiendo del bosque conformado por las aristas de $RD$. Como es bosque no rompe la invariante y en cada paso conecta a una de las componentes de $RD$ con una arista perteneciente a $C$ y agregando dicha arista a $RC$.
\\
\par
Entonces sabemos buscar un $RC$ óptimo dado un $RD$, ahora tenemos que buscar un $RD$ tal que los costos resultantes sean mínimos. Para esto se nos ocurrió que $RD$ tiene que contener las aristas de un “Bosque Generador Máximo de $D$”, con bosque generador máximo(BGM) de $D$ nos referimos a un subgrafo de $D$ tal que para cada componente conexa $D_i$ de $D$, existe una componente conexa $BGM_i$ perteneciente al BGM de $D$ tal que $BGM_i$ es árbol generador máximo de $D_i$. 
\\
\par
Como vimos $RD$ tiene que ser un bosque. Veamos por qué el BGM es el bosque óptimo para asignar a $RD$. Tenemos $D$ y componentes conexas $D_1 , D_2 , … , D_k$, al sacar un eje cualquiera, digamos de $D_i$, si este eje pertenecía a un ciclo de $D_i$ la componente conexa seguirá teniendo la mismos nodos, pero si este no pertenecía a un ciclo, entonces dividiremos a $D_i$ en dos componentes conexas, llamémoslas $D_i1$ y $D_i2$ y veamos que esta división de componentes encarece la construccion de $R$ a partir de $RD$. Cuando aplicamos Kruskal para un bosque de componentes conexas $D_1 , D_2 , … , D_k$ solo podrá elegir sobre ejes que conectan nodos de distintas componentes conexas porque los ejes que conectan nodos de la misma componente formarían un ciclo, llamamos al conjunto de ejes $L$ construidos a partir de $RD$. Ahora si dividimos la componente conexa en $D_i1$ y $D_i2$, cuando aplicamos Kruskal a $RD$ además de tener los ejes $L$, vamos a poder elegir entre los ejes que unen $D_i1$ y $D_i2$ que los vamos a llamar $LD$, si algún eje de $LD$ es menor que cualquiera de $L$, el algoritmo elegirá este, pero este nos unirá  $D_i1$ y $D_i2$ formando de vuelta una componente conexa con los mismos nodos que $D_i$, osea que Kruskal después deberá elegir entre los ejes de $L$ y serán los mismos que si no se hubiera dividido la componente $D_i$, por ende el costo total sería mayor que la suma de los pesos de los ejes de $L$. Ahora veamos también que empeora si no elige ninguno de los ejes de $LD$, si pasa esto solo le queda elegir entre los de $L$, como sabemos si tenemos k componentes conexas Kruskal eligirá k-1 ejes, osea que en el dividido eligirá un eje más, ahora deberíamos ver que Kruskal primero elegirá a los ejes que conforman a $L$ y luego algún eje más que logre que $D_i1$ y $D_i2$ pertenezcan a la misma componente, el costo de este procedimiento sería mayor que la suma de los costos de los ejes pertenecientes a $L$.
\\
\par
Entonces $RD$ tiene que ser un bosque subgrafo de $D$ tal que para cada componente conexa $D_i$ de $D$, existe una componente conexa $RD_i$ perteneciente al $RD$ tal que $RD_i$ es árbol generador de $D_i$. Definimos al costo de $BG$ bosque generador de $D$  como la suma de los pesos de los ejes pertenecientes a $D - BG$ y buscamos que $RD$ sea el bosque generador de costo mínimo. Si $RD$ fuera distinto del BGM de $D$, significaría que el costo de $RD$ es menor que el costo del BGM de $D$ lo cual es absurdo porque el BGM de $D$ es el bosque generador obtenido a partir de la destrucción de las rutas más baratas. Entonces $RD$ tiene que ser el BGM de $D$.

\subsection{Cota temporal}

\subsection{Experimentacion}

\pagebreak